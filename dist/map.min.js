(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};d||(d=this.game.views.LeftTopCurve),a||(h=this.game.views.RightTopCurve),c||(c=this.game.views.LeftBottomCurve),g||(g=this.game.views.RightBottomCurve),b||(b=this.game.views.HorizontalStreet),i||(i=this.game.views.VerticalStreet),a||(a=this.game.views.Crossroad),e=function(){function a(a,b){this.canvasHeight=a||360,this.canvasWidth=b||300,this.tileHeight=60,this.tileWidth=60}return a.prototype.getCanvasHeight=function(){return this.canvasHeight},a.prototype.getCanvasWidth=function(){return this.canvasWidth},a.prototype.calculateMap=function(){var a,b,c,d,e,f,g,h,i;for(d=this._initMap(),f=d.numRows,e=d.numCols,i=b=0,g=f;0<=g?b<=g:b>=g;i=0<=g?++b:--b)for(a=c=0,h=e;0<=h?c<=h:c>=h;a=0<=h?++c:--c)this._setTile([i,a],d);return JSON.stringify({map:d,numRows:d.numRows,numCols:d.numCols})},a.prototype._initMap=function(){var a,b,c,d,e,f,g,h,i;for(d=[],f=Math.floor(this.canvasHeight/this.tileHeight),e=Math.floor(this.canvasWidth/this.tileWidth),d.numRows=f,d.numCols=e,i=b=0,g=f;0<=g?b<=g:b>=g;i=0<=g?++b:--b)for(d[i]=[],a=c=0,h=e;0<=h?c<=h:c>=h;a=0<=h?++c:--c)d[i][a]="";return d},a.prototype._setTile=function(a,b){var c,d,e,f,g;return f=a[0],g=a[1],e=b.numRows,d=b.numCols,c={above:f>0?b[f-1][g]:null,below:f<e?b[f+1][g]:null,leftHand:g>0?b[f][g-1]:null,rightHand:g<d?b[f][g+1]:null},b[f][g]=this._pickTile(c),b},a.prototype._pickTile=function(a){var b,c,d;return b={above:["^",">","|","+",""],below:["v","<","|","+",""],leftHand:["v",">","-","+",""],rightHand:["^","<","-","+",""]},c=["^",">","v","<","-","|","+"],d=c.slice(0),c.push(""),null===a.above&&(c=c.filter(function(a){return m.call(b.above,a)<0})),null===a.leftHand?c=c.filter(function(a){return m.call(b.leftHand,a)<0}):c.length>1&&(c=c.filter(function(a){return m.call(b.leftHand,a)>=0})),null===a.below?c=c.filter(function(a){return m.call(b.below,a)<0}):c.length>1&&(c=c.filter(function(a){return m.call(b.below,a)>=0})),null===a.rightHand?c=c.filter(function(a){return m.call(b.rightHand,a)<0}):c.length>1&&(c=c.filter(function(a){return m.call(b.rightHand,a)>=0})),m.call(c,"")>=0&&(c=d[Math.floor(Math.random()*d.length)]),c[0]},a}(),f=function(){function e(a){this.node=a}return e.prototype.render=function(a){var b,c,d,e,f,g,h;for(console.log("Translating into DOM:"),console.log(a.map),e=[],f=c=0,d=a.numRows;0<=d?c<d:c>d;f=0<=d?++c:--c)e.push(function(){var c,d,e;for(e=[],b=c=0,d=a.numCols;0<=d?c<d:c>d;b=0<=d?++c:--c)g=a.map[f][b],h=this.getViewForSign(g),e.push(this.node.appendChild(h.render()));return e}.call(this));return e},e.prototype.getViewForSign=function(e){var f;switch(e){case"^":f=d;break;case">":f=h;break;case"v":f=g;break;case"<":f=c;break;case"-":f=b;break;case"|":f=i;break;case"+":f=a}return new f},e}(),l="undefined"!=typeof exports&&null!==exports?exports:this,null==l.game&&(l.game={}),null==(j=l.game).models&&(j.models={}),l.game.models.Map=e,null==(k=l.game).views&&(k.views={}),l.game.views.Map=f}).call(this);
//# sourceMappingURL=map.min.js.map