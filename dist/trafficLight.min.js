(function(){var a,b,c,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;a||(a=this.game.views.AbstractSvg),b=function(){function a(){this._states=["red","yellow","green"],this._currentState=this._states[0],this._redToGreen=!0}return a.prototype.getStates=function(){return this._states.slice(0)},a.prototype.getState=function(){return this._currentState},a.prototype.setState=function(a){this._currentState=this._states[this._states.indexOf(a)]},a.prototype.cycle=function(){var a,b,c,d,e,f,g;return f=this._states,a=this._currentState,e=this._states,d=e[0],g=e[1],c=e[2],b=f.indexOf(a),this._redToGreen?a===d?this._currentState=f[1]:a===g?this._currentState=f[2]:(this._redToGreen=!1,this._currentState=f[1]):a===c?this._currentState=f[1]:a===g?this._currentState=f[0]:(this._redToGreen=!0,this._currentState=f[1]),this._currentState},a}(),c=function(a){function b(){this.bindTo=g(this.bindTo,this),b.__super__.constructor.call(this),this.node=null,this.model=null,this.state="red"}return h(b,a),b.prototype.render=function(){var a,b,c,d,e,f,g;return f=this.getTileContextNamespace(),e=this.getTileContext(),b=document.createElementNS(f,"g"),a=document.createElementNS(f,"path"),a.setAttribute("d","M33 0h33v60h-11v40h-11v-40h-11z"),a.setAttribute("class","device"),d=document.createElementNS(f,"circle"),d.setAttribute("r","10"),d.setAttribute("cx","50"),d.setAttribute("cy","10"),d.setAttribute("class","current red light"),g=document.createElementNS(f,"circle"),g.setAttribute("r","10"),g.setAttribute("cx","50"),g.setAttribute("cy","30"),g.setAttribute("class","yellow light"),c=document.createElementNS(f,"circle"),c.setAttribute("r","10"),c.setAttribute("cx","50"),c.setAttribute("cy","50"),c.setAttribute("class","green light"),b.appendChild(d),b.appendChild(g),b.appendChild(c),e.appendChild(b),e.setAttribute("height","40"),e.setAttribute("width","40"),e.setAttribute("class","traffic-light"),this.node=e,this.on("click"),e},b.prototype.bindTo=function(a){return this.model=a,Object.defineProperty(this,"state",{enumerable:!0,get:function(){return a.getState()},set:function(b){var c,d;a.setState(b),c=this.node.querySelector(".current.light"),c.classList.remove("current"),d=this.node.querySelector("."+b),d.classList.add("current")}})},b.prototype.on=function(a,b){this.node.addEventListener(a,function(a){return function(c){switch(c.type){case"click":a.cycleState()}if(b)return b()}}(this))},b.prototype.cycleState=function(){return this.state=this.model.cycle()},b}(a),f="undefined"!=typeof exports&&null!==exports?exports:this,null==f.game&&(f.game={}),null==(d=f.game).models&&(d.models={}),f.game.models.TrafficLight=b,null==(e=f.game).views&&(e.views={}),f.game.views.TrafficLight=c}).call(this);
//# sourceMappingURL=trafficLight.min.js.map